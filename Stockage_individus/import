import IATableDesTypes as IA
import donnees
import numpy as np
import stockage

def import_type_chart(fichier):
    matrix_from_file = []
    with open('stock.txt', 'r') as fichier:
        matrix_from_file = [list(map(float, line.split())) for _,line in zip(range(18),fichier)]
    return matrix_from_file

def import_pokemon_description(fichier):
    pokemon = IA.simplepokemon()
    with open('stock.txt', 'r') as fichier:
        lines = fichier.readlines()
        for line in lines:
            if line.startswith("Nom:"):
                name = line.split(":")[1].strip()
                pokemon.name = name
            elif line.startswith("Type:"):
                type = line.split(":")[1].strip()
                pokemon.type = type
            elif line.startswith("HP:"):
                hp = int(line.split(":")[1].strip())
                pokemon.hp = hp
            elif line.startswith("Attaques:"):
                raw_attacks = line.split(":")[1].strip()
                attack_list = raw_attacks.split(',')

                cleaned_attacks = []

                for item in attack_list:
                    cleaned = item.replace("(", "").replace(")", "").replace("[", "").replace("]", "").replace("'", "").strip()
                    cleaned_attacks.append(cleaned)

                attacks = [(int(cleaned_attacks[2*i]), cleaned_attacks[2*i+1]) for i in range(len(cleaned_attacks)//2)]       

                pokemon.attacks = attacks
            elif line.startswith("Fitness:"):
                fitness = float(line.split(":")[1].strip())
                pokemon.fitness = fitness
    return pokemon

stock = open('stock.txt', 'r')

pokemon = import_pokemon_description(stock)
print(pokemon.attacks[1])